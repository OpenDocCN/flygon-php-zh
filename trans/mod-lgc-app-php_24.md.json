["```php\n**articles.php**\n1 <?php\n2 require \"includes/setup.php\";\n3\n4 $user_id = $user->getId();\n5\n6 $db = new Database($db_host, $db_user, $db_pass);\n7 $articles_gateway = new ArticlesGateway($db);\n8 $users_gateway = new UsersGateway($db);\n9 $article_transactions = new ArticleTransactions(\n10 $articles_gateway,\n11 $users_gateway\n12 );\n13\n14 $id = isset($_GET['id']) ? $_GET['id'] : 0;\n15 if ($id) {\n16 $article_transactions->updateExistingArticle($user_id, $_POST);\n17 } else {\n18 $article_transactions->submitNewArticle($user_id, $_POST);\n19 }\n20\n21 $response = new \\Mlaphp\\Response('/path/to/app/views');\n22 $response->setView('articles.html.php');\n23 $response->setVars(array(\n24 'id' => $id,\n25 'failure' => $article_transactions->getFailure(),\n26 'input' => $article_transactions->getInput(),\n27 'action' => $_SERVER['PHP_SELF'],\n28 ));\n29 $response->send();\n30 ?>\n**views/articles.html.php**\n1 <?php\n2 $current_page = 'articles';\n3\n4 include \"header.php\";\n5\n6 if ($id) {\n7 $page_title = \"Edit An Article\";\n8 } else {\n9 $page_title = \"Submit An Article\";\n10 }\n11 ?>\n12\n13 <h1><?php echo $page_title ?></h1><?php\n14\n15 if ($failure) {\n16 echo \"<h2>Failure</h2>\";\n17 echo \"<p>We could not save the article.<br />\";\n18 foreach ($failure as $failure_text) {\n19 echo $this->esc($failure_text) . \"<br />\";\n20 }\n21 echo \"</p>\";\n22 } else {\n23 echo \"\n24 <h2>Success</h2>\n25 <p>We saved the article.</p>\n26 \";\n27 }\n28 ?>\n29\n30 <form method=\"POST\" action=\"<?php echo $this->esc($action) ?>\">\n31\n32 <input type=\"hidden\" name=\"id\" value=\"<?php echo $this->esc($id) ?>\" />\n33\n34 <h3>Title</h3>\n35 <input type=\"text\" name=\"title\" value=\"<?php\n36 echo $this->esc($input['title'])\n37 ?>\" size=\"100\">\n38\n39\n40 <h3>Article</h3>\n41 <textarea name=\"body\" cols=\"80\" rows=\"30\"><?php\n42 echo stripslashes($this->esc($input['body']))\n43 ?></textarea>\n44\n45 <h3>Ratings</h3>\n46 <p>How many rated reviews do you want?</p>\n47 <select name='max_ratings'>\n48 <?php for ($i = 1; $i <= 10; $i ++) {\n49 $i = $this->esc($i);\n50 echo \"<option value='$i' \";\n51 if ($input['max_ratings'] == $i) {\n52 echo 'selected=\"selected\"';\n53 }\n54 echo \">$i</option>\\n\";\n55 } ?>\n56 </select>\n57\n58 <p>How many credits will you give for each rating?</p>\n59 <input type='text' name='credits_per_rating' value='<?php\n60 echo $this->esc($input['credits_per_rating']);\n61 ?>' size='5' />\n62\n63 <h3>Notes for Reviewers</h3>\n64 <input type=\"text\" name=\"notes\" value=\"<?php\n65 echo $this->esc($input['notes'])\n66 ?>\" size=\"100\">\n67 <label><input type=\"checkbox\" name=\"ready\" <?php\n68 echo ($input['ready']) ? 'checked=\"checked\"' : '';\n69 ?> /> This article is ready to be rated.</label>\n70\n71 <p align=\"center\">\n72 <input type=\"submit\" value=\"Save\" name=\"submit\">\n73 </p>\n74\n75 </form>\n76\n77 <?php\n78 include \"footer.php\";\n79 ?>\n```"]