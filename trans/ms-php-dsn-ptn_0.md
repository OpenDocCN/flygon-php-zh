# 前言

你有没有去过 PHP 会议？如果没有，我强烈推荐你去，这是你能接触到活生生的 PHP 社区的最近距离。几周前，我从伦敦飞到密苏里州圣路易斯市，参加了 php[tek]（由 php[architect]主办的 PHP 会议）。会议结束后，PHP 社区内有一个小传统，被称为 WurstCon。基本上，数百名 PHP 会议与会者挤进一个小热狗店，举办一个热狗大会，往往让店员完全惊讶。同样，PHP 活动的社区之夜是你可能遇到的最温暖和最接纳的社区场合；PHP 社区无疑是其他开发语言社区所羡慕的。

从 PHP 7 开始，PHP 项目发生了巨大变化；但我所热爱的东西依然坚固。在任何 PHP 会议上你会感受到的温暖，文档的开放性，以及语言的采纳。是的，PHP 本身存在着无疑糟糕的实践；然而，请想一想 PHP 社区最近取得的成就，从 PHPUnit 到 Composer。在本书中，请记住 PHP 7 的改进，其中我将与你分享一些。项目的轨迹现在肯定是向上的，让我们不要忘记这并不总是真的。PHP 社区从过去中吸取了教训，而语言本身保持了编写糟糕代码的灵活性。

这本书将致力于向你传授强大的软件工程技能，并专注于在 PHP 中实施这些技能。在出版这本书的时候，这种材料有一定的空白和必要性。这本书旨在成为不仅展示软件设计理论，而且还寻求传授实际有价值的实用信息，以改进你编写的代码的质量和可维护性的灯塔。这本书在整个软件开发周期中不遗余力，并将寻求解决大多数软件项目失败的原因，同时解决设计、重设计和保护有效代码的问题。

这本书超越了四人帮所设想的传统设计模式，并详细介绍了热情的 PHP 开发人员在详细的 PHP 项目中成功的必备实践。本书将介绍你理解项目管理技术所需的核心知识，为什么大多数软件开发项目失败，以及为什么你可以让你的项目成功。

最初，我考虑写一本关于 PHP 的书，当时我之前一起工作过的 Mandi Rose 建议我写一本关于我在 PHP 中学到的实践的书。不用说，在那个建议提出的时候，我职业生涯的最好时光无疑还在前方；当实际出现写这样一本书的机会时，我感到自己随着时间的推移学到了更多。你绝对不应该把这本书看作是 PHP 实践的全部；相反，你应该用它来增加你对 PHP 的知识基础，但绝不仅限于此。在这本书中，我希望能够给 PHP 社区一些东西，无论多么微小；阅读完这本书后，我鼓励你投入其中，与他人分享你所学到的东西。

在本书的后面，我将倡导极限编程作为一种方法论，勇气作为这种方法论的关键价值。我会要求你牢记《极限编程的价值观》中对勇气的解释：“我们将如实地讲述进展和估算的真相。我们不会为失败找借口，因为我们计划成功。我们不会害怕任何事情，因为没有人是独自工作的。我们将随时适应变化。”当然，这是一些建议，我们都应该遵循，并真正理解风险，而不是在风险背后畏缩。对于我们许多人来说，我们在职业生涯的某些阶段编写的代码是我们劳动的最高表现。事实上，我们花费的深夜转变为清晨的时间来调试和开发，最终让我们能够展示我们劳动成果。实际上，作为软件工程师，我们编写的代码定义了我们是谁，因此我们应该不断地完善和重构我们的流程，这正是本书的目标所在。我非常荣幸你选择让我帮助你达到这个目标。

# 这本书涵盖了什么

第一章 *为什么“优秀的 PHP 开发人员”不是一个矛盾词*，介绍了设计模式的概念，作为常见问题的重复解决方案。

第二章 *反模式*，介绍了模式如何导致明显的负面后果。

第三章 *创建型设计模式*，讨论了四人帮设计模式，即围绕对象创建的模式。

第四章 *结构型设计模式*，涵盖了如何组合多个类和对象以提供更清晰的接口。

第五章 *行为设计模式*，解释了如何通过识别可以帮助对象之间通信的模式，来增加对象之间通信的灵活性。

第六章 *架构模式*，围绕解决与 Web 应用/系统架构相关的常见问题，可能超出了代码本身。

第七章 *重构*，展示了如何重新设计已经编写的代码以提高可维护性。

第八章 *如何编写更好的代码*，涵盖了一系列在其他地方没有讨论的概念，并最后为开发人员提供了一些建议。

# 你需要为这本书做好准备

在整本书中，安装 PHP 7 将对你有所帮助。你应该准备根据需要改变你的开发环境；我们将在遇到它们时解决各种工具的安装。

这本书不适合绝望的敌对者或 passively 对接近新软件工程原则持敌对态度的人。它也不适合那些试图成为孤胆英雄的人。在改变给定的代码库时，你必须努力改进整个代码库的代码和所有工作在其中的人。你必须愿意对你编写的代码承担个人责任，而不是责怪外部因素。在共享代码库上，代码可维护性不能单方面改进；你必须编写你的代码，以便为那些在你之后维护它的人维护代码质量。此外，试图以能够分享你所学到的知识的心态来阅读本书，无论是与你的团队、用户组还是更大的 PHP 社区。换句话说，以最终目标为导向来阅读本书；以改进你的代码和你维护的代码库中的人为目标来阅读本书。

# 这本书是为谁准备的

这本书显然是针对 PHP 开发人员，他们希望了解成为软件工程师所需的完整技能，特别是一些关于软件设计的课程；这本书将教育您如何使您的代码更具可扩展性和更易于开发。这本书旨在使您的代码不仅仅是一堆函数和类，而是更倾向于设计良好、编写良好和经过良好测试的代码。

您需要对 PHP 有一定的了解，并且足够构建一个应用程序，但绝不必在 PHP 的所有方面都成为专家；对软件工程基础知识的掌握肯定会让您事半功倍。

您必须以开放的心态和愿意挑战您对软件开发的先入之见来阅读本书。本书将揭示一些关于您作为开发人员可能个人失败的真相；您必须愿意接受这些原则。

本书提供了一套您可以采用的软件开发模式和原则。您必须理解这些模式应该和不应该应用的地方；这将在整本书中得到解释，特别是在最后一章。

阅读本书的一个关键原则是了解 PHP 的用途和不用途。我希望您在阅读本书时了解您期望 PHP 解决的问题以及您期望使用其他软件开发语言解决的问题。

# 约定

在本书中，您将找到许多文本样式，用于区分不同类型的信息。以下是一些示例以及它们的含义解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名显示如下：“`index.php`文件现在产生了这个结果”。

代码块设置如下：

```php
<?php 

abstract class Notifier 
{ 
 protected $to; 

 public function __construct(string $to) 
 { 
 $this->to = $to; 
 } 

 abstract public function validateTo(): bool; 

 abstract public function sendNotification(): string; 

}
```

任何命令行输入或输出都以以下方式编写：

```php
**echo $richard->hasPaws;**

```

**新术语**和**重要单词**以粗体显示。例如，您在屏幕上看到的单词，比如菜单或对话框中的单词，会在文本中以这种方式出现：“将您的网络浏览器指向您选择的网络服务器，您应该会在屏幕上看到 Hello world!弹出”。

### 注意

警告或重要说明会以这样的方式出现在一个框中。

### 提示

提示和技巧会以这种方式出现。
