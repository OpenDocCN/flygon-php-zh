["```php\n    // /repo/ch08/php7_each.php\n    $data_src = __DIR__ \n    \u00a0\u00a0\u00a0\u00a0. '/../sample_data/cities15000_min.txt';\n    $fh\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0= fopen($data_src, 'r');\n    $pattern\u00a0\u00a0= \"%30s : %20s\\n\";\n    $target\u00a0\u00a0\u00a0= 10000000;\n    $data\u00a0\u00a0\u00a0\u00a0\u00a0= [];\n    ```", "```php\n    while ($line = fgetcsv($fh, '', \"\\t\")) {\n    \u00a0\u00a0\u00a0\u00a0$popNum = $line[14] ?? 0;\n    \u00a0\u00a0\u00a0\u00a0if ($popNum > $target) {\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$city = $line[1]\u00a0\u00a0?? 'Unknown';\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$data[$city] = $line[4]. ',' . $line[5];\n    \u00a0\u00a0\u00a0\u00a0}\n    }\n    ```", "```php\n    fclose($fh);\n    ksort($data);\n    printf($pattern, 'City', 'Latitude/Longitude');\n    printf($pattern, '----', '--------------------');\n    while ([$city, $latLon] = each($data)) {\n    \u00a0\u00a0\u00a0\u00a0$city = str_pad($city, 30, ' ', STR_PAD_LEFT);\n    \u00a0\u00a0\u00a0\u00a0printf($pattern, $city, $latLon);\n    }\n    ```", "```php\nroot@php8_tips_php7 [ /repo/ch08 ]# php php7_each.php \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0City :\u00a0\u00a0\u00a0Latitude/Longitude\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0---- : --------------------\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Beijing :\u00a0\u00a0\u00a0\u00a039.9075,116.39723\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Buenos Aires :\u00a0\u00a0-34.61315,-58.37723\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Delhi :\u00a0\u00a0\u00a0\u00a028.65195,77.23149\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Dhaka :\u00a0\u00a0\u00a0\u00a0\u00a023.7104,90.40744\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Guangzhou :\u00a0\u00a0\u00a0\u00a0\u00a0\u00a023.11667,113.25\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Istanbul :\u00a0\u00a0\u00a0\u00a041.01384,28.94966\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Karachi :\u00a0\u00a0\u00a0\u00a0\u00a0\u00a024.8608,67.0104\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Mexico City :\u00a0\u00a0\u00a019.42847,-99.12766\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Moscow :\u00a0\u00a0\u00a0\u00a055.75222,37.61556\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Mumbai :\u00a0\u00a0\u00a0\u00a019.07283,72.88261\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Seoul :\u00a0\u00a0\u00a0\u00a0\u00a0\u00a037.566,126.9784\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Shanghai :\u00a0\u00a0\u00a031.22222,121.45806\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Shenzhen :\u00a0\u00a0\u00a0\u00a022.54554,114.0683\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0S\u00e3o Paulo :\u00a0\u00a0\u00a0-23.5475,-46.63611\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Tianjin :\u00a0\u00a0\u00a039.14222,117.17667\n```", "```php\n    // /repo/ch08/php8_each_replacements.php\n    $data_src = __DIR__ \n    \u00a0\u00a0\u00a0\u00a0. '/../sample_data/cities15000_min.txt';\n    $fh\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0= new SplFileObject($data_src, 'r');\n    $pattern\u00a0\u00a0= \"%30s : %20s\\n\";\n    $target\u00a0\u00a0\u00a0= 10000000;\n    $data\u00a0\u00a0\u00a0\u00a0\u00a0= new ArrayIterator();\n    ```", "```php\n    while ($line = $fh->fgetcsv(\"\\t\")) {\n    \u00a0\u00a0\u00a0\u00a0$popNum = $line[14] ?? 0;\n    \u00a0\u00a0\u00a0\u00a0if ($popNum > $target) {\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$city = $line[1]\u00a0\u00a0?? 'Unknown';\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$data->offsetSet($city, $line[4]. ',' . \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$line[5]);\n    \u00a0\u00a0\u00a0\u00a0}\n    }\n    ```", "```php\n    $data->ksort();\n    $data->rewind();\n    printf($pattern, 'City', 'Latitude/Longitude');\n    printf($pattern, '----', '--------------------');\n    while ($data->valid()) {\n    \u00a0\u00a0\u00a0\u00a0$city = str_pad($data->key(), 30, ' ', STR_PAD_LEFT);\n    \u00a0\u00a0\u00a0\u00a0printf($pattern, $city, $data->current());\n    \u00a0\u00a0\u00a0\u00a0$data->next();\n    }\n    ```", "```php\n    // /repo/ch08/php7_create_function.php\n    $start = microtime(TRUE);\n    ```", "```php\n    $normalize = create_function(\n    \u00a0\u00a0\u00a0\u00a0'&$line, $key',\n    \u00a0\u00a0\u00a0\u00a0'$split = strpos($line, \" \");'\n    \u00a0\u00a0\u00a0\u00a0. '$ip = trim(substr($line, 0, $split));'\n    \u00a0\u00a0\u00a0\u00a0. '$remainder = substr($line, $split);'\n    \u00a0\u00a0\u00a0\u00a0. '$tmp = explode(\".\", $ip);'\n    \u00a0\u00a0\u00a0\u00a0. 'if (count($tmp) === 4)'\n    \u00a0\u00a0\u00a0\u00a0. '\u00a0\u00a0\u00a0\u00a0$ip = vsprintf(\"%03d.%03d.%03d.%03d\", $tmp);'\n    \u00a0\u00a0\u00a0\u00a0. '$line = $ip . $remainder;'\n    );\n    ```", "```php\n    $sort_by_ip = create_function(\n    \u00a0\u00a0\u00a0\u00a0'$line1, $line2',\n    \u00a0\u00a0\u00a0\u00a0'return $line1 <=> $line2;' );\n    ```", "```php\n    $orig\u00a0\u00a0\u00a0= __DIR__ . '/../sample_data/access.log';\n    $log\u00a0\u00a0\u00a0\u00a0= file($orig);\n    $sorted = new SplFileObject(__DIR__ \n    \u00a0\u00a0\u00a0\u00a0. '/access_sorted_by_ip.log', 'w');\n    ```", "```php\n    array_walk($log, $normalize);\n    usort($log, $sort_by_ip);\n    ```", "```php\n    foreach ($log as $line) $sorted->fwrite($line);\n    $time = microtime(TRUE) - $start;\n    echo \"Time Diff: $time\\n\";\n    ```", "```php\n094.198.051.136 - - [15/Mar/2021:10:05:06 -0400]\u00a0\u00a0\u00a0\u00a0\"GET /courses HTTP/1.0\" 200 21530\n094.229.167.053 - - [21/Mar/2021:23:38:44 -0400] \n\u00a0\u00a0\u00a0\"GET /wp-login.php HTTP/1.0\" 200 34605\n095.052.077.114 - - [10/Mar/2021:22:45:55 -0500] \n\u00a0\u00a0\u00a0\"POST /career HTTP/1.0\" 200 29002\n095.103.103.223 - - [17/Mar/2021:15:48:39 -0400] \n\u00a0\u00a0\u00a0\"GET /images/courses/php8_logo.png HTTP/1.0\" 200 9280\n095.154.221.094 - - [25/Mar/2021:11:43:52 -0400] \n\u00a0\u00a0\u00a0\"POST / HTTP/1.0\" 200 34546\n095.154.221.094 - - [25/Mar/2021:11:43:52 -0400] \n\u00a0\u00a0\u00a0\"POST / HTTP/1.0\" 200 34691\n095.163.152.003 - - [14/Mar/2021:16:09:05 -0400] \n\u00a0\u00a0\u00a0\"GET /images/courses/mongodb_logo.png HTTP/1.0\" 200 11084\n095.163.255.032 - - [13/Apr/2021:15:09:40 -0400] \n\u00a0\u00a0\u00a0\"GET /robots.txt HTTP/1.0\" 200 78\n095.163.255.036 - - [18/Apr/2021:01:06:33 -0400] \n\u00a0\u00a0\u00a0\"GET /robots.txt HTTP/1.0\" 200 78\n```", "```php\n    // /repo/ch08/php8_create_function.php\n    $start = microtime(TRUE);\n    ```", "```php\n    $normalize = function (&$line, $key) {\n    \u00a0\u00a0\u00a0\u00a0$split = strpos($line, ' ');\n    \u00a0\u00a0\u00a0\u00a0$ip = trim(substr($line, 0, $split));\n    \u00a0\u00a0\u00a0\u00a0$remainder = substr($line, $split);\n    \u00a0\u00a0\u00a0\u00a0$tmp = explode(\".\", $ip);\n    \u00a0\u00a0\u00a0\u00a0if (count($tmp) === 4)\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$ip = vsprintf(\"%03d.%03d.%03d.%03d\", $tmp);\n    \u00a0\u00a0\u00a0\u00a0$line = $ip . $remainder;\n    };\n    ```", "```php\n    $sort_by_ip = fn ($line1, $line2) => $line1 <=> $line2;\n    ```", "```php\n    // /repo/ch08/php7_money_format.php\n    $amt = 1234567.89;\n    setlocale(LC_MONETARY, 'en_US');\n    echo \"Natl: \" . money_format('%n', $amt) . \"\\n\";\n    echo \"Intl: \" . money_format('%i', $amt) . \"\\n\";\n    ```", "```php\n    setlocale(LC_MONETARY, 'de_DE');\n    echo \"Natl: \" . money_format('%n', $amt) . \"\\n\";\n    echo \"Intl: \" . money_format('%i', $amt) . \"\\n\";\n    ```", "```php\nroot@php8_tips_php7 [ /repo/ch08 ]# php php7_money_format.php\nNatl: $1,234,567.89\nIntl: USD 1,234,567.89\nNatl: 1.234.567,89 EUR\nIntl: 1.234.567,89 EUR\n```", "```php\n    // /repo/ch08/php8_number_formatter_fmt_curr.php\n    $amt = 1234567.89;\n    $fmt = new NumberFormatter('en_US',\n    \u00a0\u00a0\u00a0\u00a0NumberFormatter::CURRENCY );\n    echo \"Natl: \" . $fmt->formatCurrency($amt, 'USD') . \"\\n\";\n    ```", "```php\n    $fmt->setSymbol(NumberFormatter::CURRENCY_SYMBOL,'USD ');\n    echo \"Intl: \" . $fmt->format($amt) . \"\\n\";\n    ```", "```php\n    $fmt = new NumberFormatter( 'de_DE',\n    \u00a0\u00a0\u00a0\u00a0NumberFormatter::CURRENCY );\n    echo \"Natl: \" . $fmt->formatCurrency($amt, 'EUR') . \"\\n\";\n    $fmt->setSymbol(NumberFormatter::CURRENCY_SYMBOL, 'EUR');\n    echo \"Intl: \" . $fmt->format($amt) . \"\\n\";\n    ```", "```php\nroot@php8_tips_php8 [ /repo/ch08 ]# \nphp php8_number_formatter_fmt_curr.php \nNatl: $1,234,567.89\nIntl: USD 1,234,567.89\nNatl: 1.234.567,89 \u20ac\nIntl: 1.234.567,89 EUR\n```", "```php\n$obj = new ArrayObject();\n/* some code (not shown) */\n$obj = (unset) $obj;\n```", "```php\n$obj = NULL; \n// or this:\nunset($obj);\n```", "```php\n    // /repo/src/Services/HashGen.php\n    namespace Services;\n    use Closure;\n    class HashGen {\n    \u00a0\u00a0\u00a0\u00a0public $class = 'HashGen: ';\n    ```", "```php\n    \u00a0\u00a0\u00a0\u00a0public function makeHash(string $type) {\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$method = 'hashTo' . ucfirst($type);\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0if (method_exists($this, $method))\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return Closure::fromCallable(\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[$this, $method]);\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0else\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0return Closure::fromCallable(\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0[$this, 'doNothing']);\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n    \u00a0\u00a0\u00a0\u00a0}\n    ```", "```php\n    // /repo/ch08/php7_closure_from_callable.php\n    require __DIR__ . '/../src/Services/HashGen.php';\n    use Services\\HashGen;\n    $hashGen = new HashGen();\n    ```", "```php\n    $doMd5 = $hashGen->makeHash('md5');\n    $text\u00a0\u00a0= 'The quick brown fox jumped over the fence';\n    echo $doMd5($text) . \"\\n\";\n    var_dump($doMd5);\n    ```", "```php\n    $temp = new class() { public $class = 'Anonymous: '; };\n    $doMd5->bindTo($temp);\n    echo $doMd5($text) . \"\\n\";\n    var_dump($doMd5);\n    ```", "```php\nroot@php8_tips_php8 [ /repo/ch08 ]# \nphp php7_closure_from_callable.php \nHashGen: b335d9cb00b899bc6513ecdbb2187087\nobject(Closure)#2 (2) {\n\u00a0\u00a0[\"this\"]=>\u00a0\u00a0object(Services\\HashGen)#1 (1) {\n\u00a0\u00a0\u00a0\u00a0[\"class\"]=>\u00a0\u00a0\u00a0\u00a0string(9) \"HashGen: \"\n\u00a0\u00a0}\n\u00a0\u00a0[\"parameter\"]=>\u00a0\u00a0array(1) {\n\u00a0\u00a0\u00a0\u00a0[\"$text\"]=>\u00a0\u00a0\u00a0\u00a0string(10) \"<required>\"\n\u00a0\u00a0}\n}\nPHP Warning:\u00a0\u00a0Cannot bind method Services\\HashGen::hashToMd5() to object of class class@anonymous in /repo/ch08/php7_closure_from_callable.php on line 16\nHashGen: b335d9cb00b899bc6513ecdbb2187087\nobject(Closure)#2 (2) {\n\u00a0\u00a0[\"this\"]=>\u00a0\u00a0object(Services\\HashGen)#1 (1) {\n\u00a0\u00a0\u00a0\u00a0[\"class\"]=>\u00a0\u00a0\u00a0\u00a0string(9) \"HashGen: \"\n\u00a0\u00a0}\n\u00a0\u00a0[\"parameter\"]=>\u00a0\u00a0array(1) {\n\u00a0\u00a0\u00a0\u00a0[\"$text\"]=>\u00a0\u00a0\u00a0\u00a0string(10) \"<required>\"\n\u00a0\u00a0}\n```", "```php\n// /repo/ch08/php7_hash_bracket_ comment.php\ntest = new class() {\n\u00a0\u00a0\u00a0\u00a0# This works as a comment\n\u00a0\u00a0\u00a0\u00a0public $works = 'OK';\n\u00a0\u00a0\u00a0\u00a0#[ This does not work in PHP 8 as a comment]\n\u00a0\u00a0\u00a0\u00a0public $worksPhp7 = 'OK';\n};\nvar_dump($test);\n```", "```php\nroot@php8_tips_php7 [ /repo/ch08 ]# \nphp php7_hash_bracket_comment.php \n/repo/ch08/php7_hash_bracket_comment.php:10:\nclass class@anonymous#1 (2) {\n\u00a0\u00a0public $works =>\u00a0\u00a0string(2) \"OK\"\n\u00a0\u00a0public $worksPhp7 =>\u00a0\u00a0string(2) \"OK\"\n}\n```", "```php\nroot@php8_tips_php8 [ /repo/ch08 ]# \nphp php7_hash_bracket_comment.php \nPHP Parse error:\u00a0\u00a0syntax error, unexpected identifier \"does\", expecting \"]\" in /repo/ch08/php7_hash_bracket_comment.php on line 7\n```", "```php\n// /repo/ch08/php7_usage_param_order.php\nfunction math(float $a, string $op = '+', float $b) {\n\u00a0\u00a0\u00a0\u00a0switch ($op) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0// not all cases are shown\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0case '+' :\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0default :\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0$out = \"$a + $b = \" . ($a + $b);\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0return $out . \"\\n\";\n}\n```", "```php\nroot@php8_tips_php7 [ /repo/ch08 ]# \nphp php7_usage_param_order.php\n22 + 7 = 29\n```", "```php\nroot@php8_tips_php8 [ /repo/ch08 ]# \nphp php7_usage_param_order.php\nPHP Deprecated:\u00a0\u00a0Required parameter $b follows optional parameter $op in /repo/ch08/php7_usage_param_order.php on line 4\n22 + 7 = 29\n```", "```php\n// /repo/ch08/php8_usage_param_order.php\nfunction math(float $a, float $b, string $op = '+') {\n\u00a0\u00a0\u00a0\u00a0// remaining code is the same\n}\n```", "```php\n// /repo/ch08/php7_mbstring_func_overload.php\n$str\u00a0\u00a0= '';\n$len1 = strlen($str);\n$len2 = mb_strlen($str);\necho \"Length of '$str' using 'strlen()' is $len1\\n\";\necho \"Length of '$str' using 'mb_strlen()' is $len2\\n\";\n```", "```php\nroot@php8_tips_php7 [ /repo/ch08 ]# \nphp php7_mbstring_func_overload.php \nLength of '' using 'strlen()' is 45\nLength of '' using 'mb_strlen()' is 15\nroot@php8_tips_php7 [ /repo/ch08 ]# \necho \"mbstring.func_overload=7\" >> /etc/php.ini\nroot@php8_tips_php7 [ /repo/ch08 ]# \nphp php7_mbstring_func_overload.php \nLength of '' using 'strlen()' is 15\nLength of '' using 'mb_strlen()' is 15\n```", "```php\n/**\n * @alias pg_last_error\n * @deprecated\n */\nfunction pg_errormessage(\n\u00a0\u00a0\u00a0\u00a0?PgSql\\Connection $connection = null): string {}\n```", "```php\n    CREATE DATABASE php8_tips;\n    \\c php8_tips;\n    \\i /repo/sample_data/pgsql_users_create.sql\n    ```", "```php\n    root@php8_tips_php8 [ /repo/ch08 ]# su postgres\n    bash-4.3$ psql\n    psql (10.2)\n    Type \"help\" for help.\n    postgres=# CREATE DATABASE php8_tips;\n    CREATE DATABASE\n    postgres=# \\c php8_tips;\n    You are now connected to database \"php8_tips\" \n    \u00a0\u00a0\u00a0\u00a0as user \"postgres\".\n    php8_tips=# \\i /repo/sample_data/pgsql_users_create.sql\n    CREATE TABLE\n    INSERT 0 4\n    CREATE ROLE\n    GRANT\n    php8_tips=# \\q\n    bash-4.3$ exit\n    exit\n    root@php8_tips_php8 [ /repo/ch08 ]# \n    ```", "```php\n    // /repo/ch08/php8_pgsql_changes.php\n    $usr = 'php8';\n    $pwd = 'password';\n    $dsn = 'host=localhost port=5432 dbname=php8_tips '\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0. ' user=php8 password=password';\n    $db\u00a0\u00a0= pg_connect($dsn);\n    $sql = \"SELECT * FROM users WHERE user_name='joe'\";\n    $stmt = pg_query($db, $sql);\n    echo pg_errormessage();\n    $result = pg_fetch_all($stmt);\n    var_dump($result);\n    ```", "```php\n    root@php8_tips_php8 [ /repo/ch08 ]# php php8_pgsql_changes.php Deprecated: Function pg_errormessage() is deprecated in /repo/ch08/php8_pgsql_changes.php on line 22\n    array(0) {}\n    ```", "```php\nroot@php8_tips_php7 [ /repo/ch08 ]# \nphp -r \"print_r(stream_get_filters());\"\nArray (\n\u00a0\u00a0\u00a0\u00a0[0] => zlib.*\n\u00a0\u00a0\u00a0\u00a0[1] => bzip2.*\n\u00a0\u00a0\u00a0\u00a0[2] => convert.iconv.*\n\u00a0\u00a0\u00a0\u00a0[3] => mcrypt.*\n\u00a0\u00a0\u00a0\u00a0[4] => mdecrypt.*\n\u00a0\u00a0\u00a0\u00a0[5] => string.rot13\n\u00a0\u00a0\u00a0\u00a0[6] => string.toupper\n\u00a0\u00a0\u00a0\u00a0[7] => string.tolower\n\u00a0\u00a0\u00a0\u00a0[8] => string.strip_tags\n\u00a0\u00a0\u00a0\u00a0[9] => convert.*\n\u00a0\u00a0\u00a0\u00a0[10] => consumed\n\u00a0\u00a0\u00a0\u00a0[11] => dechunk\n)\n```", "```php\nroot@php8_tips_php8 [ /repo/ch08 ]# php -r \"print_r(stream_get_filters());\"\nArray (\n\u00a0\u00a0\u00a0\u00a0[0] => zlib.*\n\u00a0\u00a0\u00a0\u00a0[1] => bzip2.*\n\u00a0\u00a0\u00a0\u00a0[2] => convert.iconv.*\n\u00a0\u00a0\u00a0\u00a0[3] => string.rot13\n\u00a0\u00a0\u00a0\u00a0[4] => string.toupper\n\u00a0\u00a0\u00a0\u00a0[5] => string.tolower\n\u00a0\u00a0\u00a0\u00a0[6] => convert.*\n\u00a0\u00a0\u00a0\u00a0[7] => consumed\n\u00a0\u00a0\u00a0\u00a0[8] => dechunk\n)\n```", "```php\n    // /repo/ch08/php7_error_handler.php\n    function handler($errno, $errstr, $errfile, \n    \u00a0\u00a0\u00a0\u00a0$errline, $errcontext = NULL) {\n    \u00a0\u00a0\u00a0\u00a0echo \"Number : $errno\\n\";\n    \u00a0\u00a0\u00a0\u00a0echo \"String : $errstr\\n\";\n    \u00a0\u00a0\u00a0\u00a0echo \"File\u00a0\u00a0\u00a0: $errfile\\n\";\n    \u00a0\u00a0\u00a0\u00a0echo \"Line\u00a0\u00a0\u00a0: $errline\\n\";\n    \u00a0\u00a0\u00a0\u00a0if (!empty($errcontext))\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0echo \"Context: \\n\" \n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0. var_export($errcontext, TRUE);\n    \u00a0\u00a0\u00a0\u00a0exit;\n    }\n    ```", "```php\n    function level1($a, $b, $c) {\n    \u00a0\u00a0\u00a0\u00a0trigger_error(\"This is an error\", E_USER_ERROR);\n    }\n    set_error_handler('handler');\n    echo level1(TRUE, 222, 'C');\n    ```", "```php\nroot@php8_tips_php7 [ /repo/ch08 ]#\nphp php7_error_handler.php \nNumber : 256\nString : This is an error\nFile\u00a0\u00a0\u00a0: /repo/ch08/php7_error_handler.php\nLine\u00a0\u00a0\u00a0: 17\nContext: \narray (\n\u00a0\u00a0'a' => true,\n\u00a0\u00a0'b' => 222,\n\u00a0\u00a0'c' => 'C',\n)\n```", "```php\nroot@php8_tips_php8 [ /repo/ch08 ]# \nphp php7_error_handler.php \nNumber : 256\nString : This is an error\nFile\u00a0\u00a0\u00a0: /repo/ch08/php7_error_handler.php\nLine\u00a0\u00a0\u00a0: 17\n```", "```php\n// /repo/ch08/php7_pdo_err_mode.php\n$dsn = 'mysql:host=localhost;dbname=php8_tips';\n$pdo = new PDO($dsn, 'php8', 'password');\n$sql = 'SELEK propertyKey, hotelName FUM hotels '\n\u00a0\u00a0\u00a0\u00a0\u00a0. \"WARE country = 'CA'\";\n$stm = $pdo->query($sql);\nif ($stm)\n\u00a0\u00a0\u00a0\u00a0while($hotel = $stm->fetch(PDO::FETCH_OBJ))\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0echo $hotel->name . ' ' . $hotel->key . \"\\n\";\nelse\n\u00a0\u00a0\u00a0\u00a0echo \"No Results\\n\";\n```", "```php\nroot@php8_tips_php8 [ /repo/ch08 ]# php php7_pdo_err_mode.php \nPHP Fatal error:\u00a0\u00a0Uncaught PDOException: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'SELEK propertyKey, hotelName FUM hotels WARE country = 'CA'' at line 1 in /repo/ch08/php7_pdo_err_mode.php:10\n```", "```php\n// /repo/ch08/php7_track_errors.php\nini_set('track_errors', 1);\n@strpos();\necho $php_errormsg . \"\\n\";\necho \"OK\\n\";\n```", "```php\nroot@php8_tips_php7 [ /repo/ch08 ]# php php7_track_errors.php \nstrpos() expects at least 2 parameters, 0 given\nOK\n```", "```php\nroot@php8_tips_php8 [ /repo/ch08 ]# php php7_track_errors.php PHP Fatal error:\u00a0\u00a0Uncaught ArgumentCountError: strpos() expects at least 2 arguments, 0 given in /repo/ch08/php7_track_errors.php:5\n```", "```php\n// /repo/ch08/php8_track_errors.php\ntry {\n\u00a0\u00a0\u00a0\u00a0strpos();\n\u00a0\u00a0\u00a0\u00a0echo error_get_last()['message'];\n\u00a0\u00a0\u00a0\u00a0echo \"\\nOK\\n\";\n} catch (Error $e) {\n\u00a0\u00a0\u00a0\u00a0echo $e->getMessage() . \"\\n\";\n}\n```"]