["```php\n**articles.php**\n1 <?php\n2 require \"includes/setup.php\";\n3\n4 $current_page = 'articles';\n5\n6 include \"header.php\";\n7\n8 $id = isset($_GET['id']) ? $_GET['id'] : 0;\n9 if ($id) {\n10 $page_title = \"Edit An Article\";\n11 } else {\n12 $page_title = \"Submit An Article\";\n13 }\n14\n15 ?><h1><?php echo $page_title ?></h1><?php\n16\n17 $user_id = $user->getId();\n18\n19 $db = new Database($db_host, $db_user, $db_pass);\n20 $articles_gateway = new ArticlesGateway($db);\n21 $users_gateway = new UsersGateway($db);\n22 $article_transactions = new ArticleTransactions(\n23 $articles_gateway,\n24 $users_gateway\n25 );\n26\n27 if ($id) {\n28 $article_transactions->updateExistingArticle($user_id, $_POST);\n29 } else {\n30 $article_transactions->submitNewArticle($user_id, $_POST);\n31 }\n32\n33 $failure = $article_transactions->getFailure();\n34 $input = $article_transactions->getInput();\n35\n36 ?>\n37\n38 <?php\n39 if ($failure) {\n40 $failure_text = implode(\"<br />\\n\", $failure);\n41 echo \"<h2>Failure</h2>\";\n42 echo \"<p>We could not save the article.<br />\";\n43 echo $failure_text. \"</p>\";\n44 } else {\n45 echo \"\n46 <h2>Success</h2>\n47 <p>We saved the article.</p>\n48 \";\n49 }\n50 ?>\n51\n52 <form method=\"POST\" action=\"<?php echo $_SERVER['PHP_SELF']?>\">\n53\n54 <input type=\"hidden\" name=\"id\" value=\"<?php echo $id ?>\" />\n55\n56 <h3>Title</h3>\n57 <input type=\"text\" name=\"title\" value=\"<?php\n58 echo $input['title']\n59 ?>\" size=\"100\">\n60\n61\n62 <h3>Article</h3>\n63 <textarea name=\"body\" cols=\"80\" rows=\"30\"><?php\n64 echo stripslashes($input['body'])\n65 ?></textarea>\n66\n67 <h3>Ratings</h3>\n68 <p>How many rated reviews do you want?</p>\n69 <select name='max_ratings'>\n70 <?php for ($i = 1; $i <= 10; $i ++) {\n71 echo \"<option value='$i' \";\n72 if ($input['max_ratings'] == $i) {\n73 echo 'selected=\"selected\"';\n74 }\n75 echo \">$i</option>\\n\";\n76 } ?>\n77 </select>\n78\n79 <p>How many credits will you give for each rating?</p>\n80 <input type='text' name='credits_per_rating' value='<?php\n81 echo $input['credits_per_rating'];\n82 ?>' size='5' />\n83\n84 <h3>Notes for Reviewers</h3>\n85 <input type=\"text\" name=\"notes\" value=\"<?php\n86 echo $input['notes']\n87 ?>\" size=\"100\">\n88 <label><input type=\"checkbox\" name=\"ready\" <?php\n89 echo $input['ready'] ? 'checked=\"checked\"' : '';\n90 ?> /> This article is ready to be rated.</label>\n91\n92 <p align=\"center\">\n93 <input type=\"submit\" value=\"Save\" name=\"submit\">\n94 </p>\n95\n96 </form>\n97\n98 <?php\n99 include \"footer.php\";\n100 ?>\n```"]