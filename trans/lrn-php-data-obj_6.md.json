["```php\n$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n```", "```php\nif($conn->getAttribute(PDO::ATTR_ERRMODE) == PDO::ERRMODE_EXCEPTION) {\necho 'Exception';\n}\n\n```", "```php\n    $conn->setAttribute(PDO::ATTR_CASE, PDO::CASE_UPPER);\n    $stmt = $conn->query(\"SELECT * FROM authors LIMIT 1\");\n    $r = $stmt->fetch(PDO::FETCH_ASSOC);\n    $stmt->closeCursor();\n    var_dump($r);\n\n    ```", "```php\n    array(4)\n    {\n    [\"ID\"]=>\n    string(1) \"1\"\n    [\"FIRSTNAME\"]=>\n    string(4) \"Marc\"\n    [\"LASTNAME\"]=>\n    string(7) \"Delisle\"\n    [\"BIO\"]=>\n    string(54) \"Marc Delisle is a member of the MySQL Developers\n    Guild\"\n    }\n\n    ```", "```php\n    $conn->setAttribute(PDO::ATTR_ORACLE_NULLS, PDO::NULL_TO_STRING);\n    $stmt = $conn->query(\"SELECT * FROM books WHERE coverImage IS\n    NULL LIMIT 1\");\n    $r = $stmt->fetch(PDO::FETCH_ASSOC);\n    $stmt->closeCursor();\n    var_dump($r);\n\n    ```", "```php\n    array(9)\n    {\n    [\"id\"]=>\n    string(1) \"2\"\n    [\"author\"]=>\n    string(1) \"2\"\n    [\"title\"]=>\n    string(18) \"ImageMagick Tricks\"\n    [\"isbn\"]=>\n    string(10) \"1904811868\"\n    [\"publisher\"]=>\n    string(20) \"Packt Publishing Ltd\"\n    [\"year\"]=>\n    string(4) \"2006\"\n    [\"summary\"]=>\n    string(81) \"Unleash the power of ImageMagick\n    with this fast,friendly tutorial and tips guide\"\n    [\"coverMime\"]=>\n    string(0) \"\"\n    [\"coverImage\"]=>\n    string(0) \"\"\n    }\n\n    ```", "```php\n    $conn = new PDO($connStr, $user, $pass,\n    array(PDO::ATTR_PERSISTENT => true);\n\n    ```", "```php\n    echo $conn->getAttribute(PDO::ATTR_DRIVER_NAME);\n\n    ```", "```php\nfunction showFooter()\n{\nglobal $conn;\nif($conn instanceof PDO) {\n$driverName = $conn->getAttribute(PDO::ATTR_DRIVER_NAME);\necho \"<br/><br/>\";\necho \"<small>Connecting using $driverName driver</small>\";\n}\n?>\n</body>\n</html>\n<?php\n}\n\n```", "```php\n$conn = new PDO($connStr, $user, $pass);\n$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); **$conn->setAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, 1);**\n$q = $conn->query(\"SELECT * FROM books\");\necho $q->rowCount();\n\n```", "```php\n$conn->setAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, 0);\n\n```", "```php\n$conn->getAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY);\n\n```", "```php\nmysql:host=localhost;dbname=pdo\nor\nsqlite:/www/hosts/localhost/pdo.db\n\n```", "```php\nuri:./pdo.dsn\n\n```", "```php\npdo.dsn.mysql= mysql:host=localhost;dbname=pdo\npdo.dsn.sqlite=sqlite:/www/hosts/localhost/pdo.db\n\n```", "```php\n$conn = new PDO('mysql', $user, $pass);\n$conn = new PDO('sqlite', $user, $pass);\n\n```", "```php\nvar_dump(PDO::getAvailableDrivers());\narray(3)\n{\n[0]=>\nstring(5) \"mysql\"\n[1]=>\nstring(6) \"sqlite\"\n[2]=>\nstring(7) \"sqlite2\"\n}\n\n```", "```php\nmysql> alter table books add column copies tinyint not null default 1;\nQuery OK, 3 rows affected (0.50 sec)\nRecords: 3 Duplicates: 0 Warnings: 0\n\n```", "```php\n<table width=\"100%\" border=\"1\" cellpadding=\"3\">\n<tr style=\"font-weight: bold\">\n<td>Cover</td>\n<td>Author and Title</td>\n<td>ISBN</td>\n<td>Publisher</td>\n<td>Year</td>\n<td>Summary</td>\n**<td>Copies</td>\n<td>Lend</td>**\n<td>Edit</td>\n</tr>\n<?php\n// Now iterate over every row and display it\nwhile($r = $q->fetch())\n{\n?>\n<tr>\n<td>\n<?php if($r['coverMime']) { ?>\n<img src=\"showCover.php?book=<?=$r['id']?>\">\n<?php } else { ?>\nn/a\n<? } ?>\n</td>\n<td>\n<a href=\"author.php?id=<?=$r['authorId']?>\"><?=htmlspecialchars\n(\"$r[firstName] $r[lastName]\")?></a><br/>\n<b><?=htmlspecialchars($r['title'])?></b>\n</td>\n<td><?=htmlspecialchars($r['isbn'])?></td>\n<td><?=htmlspecialchars($r['publisher'])?></td>\n<td><?=htmlspecialchars($r['year'])?></td>\n<td><?=htmlspecialchars($r['summary'])?></td>\n**<td><?=$r['copies']?></td>\n<td>\n<a href=\"lendBook.php?book=<?=$r['id']?>\">Lend</a>\n</td>**\n<td>\n<a href=\"editBook.php?book=<?=$r['id']?>\">Edit</a>\n</td>\n</tr>\n<?php\n}\n?>\n\n```", "```php\nmysql> create table borrowers(\n-> id int primary key not null auto_increment,\n-> book int not null,\n-> name varchar(40),\n-> dt int);\nQuery OK, 0 rows affected (0.13 sec)\n\n```", "```php\nsqlite> create table borrowers(\n...> id integer primary key,\n...> book int not null,\n...> name varchar(40),\n...> dt int);\n\n```", "```php\n<?php\n/**\n* This page allows lending a book\n* PDO Library Management example application\n* @author Dennis Popel\n*/\n// Don't forget the include\ninclude('common.inc.php');\n// First see if the request contains the book ID\n// Return back to books.php if not\n$id = (int)$_REQUEST['book'];\nif(!$id) {\nheader(\"Location: books.php\");\nexit;\n}\n// Now see if the form was submitted\n$warnings = array();\nif($_POST['submit']) {\n// Require that the borrower's name is entered\nif(!$_POST['name']) {\n$warnings[] = 'Please enter borrower\\'s name';\n}\nelse {\n// Form is OK, \"lend\" the book\n$conn->beginTransaction();\ntry\n{\n$stmt = $conn->query(\"SELECT copies FROM books WHERE id=$id\");\n$copies = $stmt->fetchColumn();\n$stmt->closeCursor();\nif($copies > 0) {\n// If we can lend it\n$conn->query(\"UPDATE books SET copies=copies-1\nWHEREid=$id\");\n$stmt = $conn->prepare(\"INSERT INTO borrowers(book, name, dt)\nVALUES(?, ?, ?)\");\n$stmt->execute(array($id, $_POST['name'], time()));\n}\nelse {\n// Else show warning\n$warnings[] = 'There are no more copies of this book\navailable';\n}\n$conn->commit();\n}\ncatch(PDOException $e)\n{\n// Something bad happened\n// Roll back and rethrow the exception\n$conn->rollBack();\nthrow $e;\n}\n}\n// Now, if we don't have errors,\n// redirect back to books.php\nif(count($warnings) == 0) {\nheader(\"Location: books.php\");\nexit;\n}\n// otherwise, the warnings will be displayed\n}\n// Display the header\nshowHeader('Lend Book');\n// If we have any warnings, display them now\nif(count($warnings)) {\necho \"<b>Please correct these errors:</b><br>\";\nforeach($warnings as $w)\n{\necho \"- \", htmlspecialchars($w), \"<br>\";\n}\n}\n// Now display the form\n?>\n<form action=\"lendBook.php\" method=\"post\">\n<input type=\"hidden\" name=\"book\" value=\"<?=$id?>\">\n<b>Please enter borrower's name:<br></b>\n<input type=\"text\" name=\"name\"value=\"<?=htmlspecialchars\n($_POST['name'])?>\">\n<input type=\"submit\" name=\"submit\" value=\" Lend book \">\n</form>\n<?php\n// Display footer\nshowFooter();\n\n```", "```php\n<?php\n/**\n* This page lists all borrowed books\n* PDO Library Management example application\n* @author Dennis Popel\n*/\n// Don't forget the include\ninclude('common.inc.php');\n// Display the header\nshowHeader('Lended Books');\n// Get all lended books count and list\n$sql = \"SELECT borrowers.*, books.title, authors.firstName,\nauthors.lastName\nFROM borrowers, books, authors\nWHERE borrowers.book=books.id AND books.author=authors.id\nORDER BY borrowers.dt\";\n$totalBooks = getRowCount($sql);\n$q = $conn->query($sql);\n$q->setFetchMode(PDO::FETCH_ASSOC);\n// now create the table\n?>\nTotal borrowed books: <?=$totalBooks?>\n<table width=\"100%\" border=\"1\" cellpadding=\"3\">\n<tr style=\"font-weight: bold\">\n<td>Title</td>\n<td>Author</td>\n<td>Borrowed by</td>\n<td>Borrowed on</td>\n<td>Return</td>\n</tr>\n<?php\n// Now iterate over every row and display it\nwhile($r = $q->fetch())\n{\n?>\n<tr>\n<td><?=htmlspecialchars($r['title'])?></td>\n<td><?=htmlspecialchars(\"$r[firstName] $r[lastName]\")?></td>\n<td><?=htmlspecialchars($r['name'])?></td>\n<td><?=date('d M Y', $r['dt'])?></td>\n<td>\n<a href=\"returnBook.php?borrower=<?=$r['id']?>\">Return</a>\n</td>\n</tr>\n<?php\n}\n?>\n</table>\n<?php\n// Display footer\nshowFooter();\n\n```", "```php\nfunction showHeader($title)\n{\n?>\n<html>\n<head><title><?=htmlspecialchars($title)?></title></head>\n<body>\n<h1><?=htmlspecialchars($title)?></h1>\n<a href=\"books.php\">Books</a>\n<a href=\"authors.php\">Authors</a>\n**<a href=\"borrowers.php\">Borrowers</a>**\n<hr>\n<?php\n}\n\n```", "```php\n<?php\n/**\n* This page \"returns\" a book back to the library\n* PDO Library Management example application\n* @author Dennis Popel\n*/\n// Don't forget the include\ninclude('common.inc.php');\n// First see if the request contains the borrowers ID\n// Return back to books.php if not\n$id = (int)$_REQUEST['borrower'];\nif(!$id) {\nheader(\"Location: books.php\");\nexit;\n}\n// Now start the transaction\n$conn->beginTransaction();\ntry\n{\n$q = $conn->query(\"SELECT book FROM borrowers WHERE id=$id\");\n$book = (int)$q->fetchColumn();\n$q->closeCursor();\n$conn->query(\"DELETE FROM borrowers WHERE id=$id\");\n$conn->query(\"UPDATE books SET copies=copies+1 WHERE id=$book\");\n$conn->commit();\nheader(\"Location: books.php\");\n}\ncatch(PDOException $e)\n{\n$conn->rollBack();\nthrow $e;\n}\n\n```"]