- en: Appendix D. Code after Transaction Scripts
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录D. 事务脚本后的代码
- en: This Appendix shows a version of the code from appendices B and C that extracts
    the domain logic from the page script into a *Transactions* class. Note how the
    original page script is now reduced to being a object creation and injection mechanism,
    and hands off most logic to the *Transactions* classes. Note also how the `$failure`,
    `$credits`, and `$article_types` variables are now properties on the Transactions
    class, and how the normalization/sanitizing logic and credit-calculation logic
    is part of the *Transactions* logic.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本附录展示了从附录B和C中提取领域逻辑到*Transactions*类的代码版本。请注意原始页面脚本现在被简化为对象创建和注入机制，并将大部分逻辑交给*Transactions*类处理。还请注意，现在`$failure`、`$credits`和`$article_types`变量现在是*Transactions*类的属性，而规范化/清理逻辑和信用计算逻辑是*Transactions*逻辑的一部分。
- en: '[PRE0]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[PRE1]'
  id: totrans-3
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
