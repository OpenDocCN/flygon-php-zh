- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: PHP 8 represents the culmination of the PHP core development team's work to
    maximize efficiency in the core language. Your application code will immediately
    see a boost in speed as well as having a smaller memory footprint just by migrating
    to PHP 8\. Further, in PHP 8, developers notice that a tremendous effort has gone
    into normalizing syntax and language usage. In short, programming in PHP 8 is
    a joy to developers who appreciate adherence to good coding practices.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: PHP 8 代表了 PHP 核心开发团队为最大化提高核心语言效率所做的工作的巅峰。只要迁移到 PHP 8，您的应用程序代码将立即看到速度提升，同时内存占用也会更小。此外，在
    PHP 8 中，开发人员会注意到大量的工作已经投入到规范语法和语言使用上。简而言之，在 PHP 8 中编程对于那些重视良好编码实践的开发人员来说是一种乐趣。
- en: 'However, this inevitably leads to the question: where does the PHP language
    go from here? PHP 8 provides the answer to this question as well, in the form
    of the Just-In-Time compiler and support for fibers. The latter forms the foundation
    of asynchronous programming and has been announced for PHP 8.1\. PHP 8 gives you
    a glimpse of the future of the language, and that future is looking extremely
    bright!'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，这不可避免地引出了一个问题：PHP 语言未来的发展方向是什么？PHP 8 也提供了这个问题的答案，即即时编译器和对 fibers 的支持。后者构成了异步编程的基础，并已宣布将在
    PHP 8.1 中推出。PHP 8 让您一窥语言的未来，而这个未来看起来非常光明！
- en: If you put all this together, it becomes clear that understanding and mastering
    the new features and stricter coding practices implemented in PHP 8 is vital to
    those who wish to pursue a serious career as a PHP developer. This book is exactly
    the tool you need to get up and running with PHP 8 quickly. Not only do we cover
    new features, but we also show you how to avoid traps that could lead to code
    failure after a PHP 8 migration. In addition, we give you a glimpse into the future
    of PHP via thorough coverage of the JIT compiler and PHP asynchronous programming.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 综合起来，可以清楚地看出，理解和掌握 PHP 8 中实施的新功能和更严格的编码实践对于那些希望追求 PHP 开发人员职业生涯的人来说是至关重要的。这本书正是您快速上手并运用
    PHP 8 所需的工具。我们不仅介绍了新功能，还向您展示了如何避免在 PHP 8 迁移后可能导致代码失败的陷阱。此外，我们通过全面介绍 JIT 编译器和 PHP
    异步编程，让您一窥 PHP 的未来。
- en: Who this book is for
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 这本书是为谁准备的
- en: This book is for PHP developers at all levels who have experience in PHP 5 or
    above. If you're just getting started with PHP, you'll find the code examples
    useful for learning to use the language more effectively. Developers who have
    worked for a few months on one or more PHP projects will be able to apply the
    tips and techniques to the code at hand, while those with many years of PHP experience
    are sure to appreciate the concise coverage of new PHP 8 features.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书适用于所有经验水平的 PHP 开发人员，他们具有 PHP 5 或更高版本的经验。如果您刚开始学习 PHP，您会发现代码示例对于更有效地学习使用该语言非常有用。在一个或多个
    PHP 项目上工作了几个月的开发人员将能够将这些技巧和技术应用到手头的代码中，而那些具有多年 PHP 经验的开发人员肯定会欣赏对 PHP 8 新功能的简明介绍。
- en: What this book covers
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 这本书涵盖了什么
- en: '[*Chapter 1*](B16992_01_Final_JC_ePub.xhtml#_idTextAnchor013), *Introducing
    New PHP 8 OOP Features*, introduces you to new PHP 8 features specific to Object-Oriented
    Programming (OOP). The chapter features plenty of short code examples that clearly
    illustrate the new features and concepts. This chapter is critical in helping
    you quickly take advantage of the power of PHP 8 and adapt the code examples to
    your own practice.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第一章*]，*介绍新的 PHP 8 面向对象编程特性*，向您介绍了针对面向对象编程（OOP）的新 PHP 8 特性。本章包含大量简短的代码示例，清晰地说明了新特性和概念。这一章对于帮助您快速利用
    PHP 8 的强大功能并将代码示例适应到您自己的实践中至关重要。'
- en: '[*Chapter 2*](B16992_02_Final_JC_ePub.xhtml#_idTextAnchor039), *Learning about
    PHP 8''s Functional Additions*, covers important additions and enhancements introduced
    to PHP 8 at the procedural level. It includes plenty of code examples that show
    new PHP 8 features and techniques to facilitate procedural programming. This chapter
    teaches you how to write faster and cleaner application code.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第二章*]，*了解 PHP 8 的功能增强*，涵盖了 PHP 8 在过程级别引入的重要增强和改进。它包括大量的代码示例，展示了新的 PHP 8 特性和技术，以便促进过程式编程。本章教会您如何编写更快、更干净的应用程序代码。'
- en: '[*Chapter 3*](B16992_03_Final_JC_ePub.xhtml#_idTextAnchor065), *Taking Advantage
    of Error-Handling Enhancements*, explores one of the key improvements in PHP 8,
    its advanced error handling capabilities. In this chapter, you learn which Notices
    have been upgraded to Warnings, as well as which Warnings have now been promoted
    to Errors. This chapter will give you an excellent understanding of the background
    and intent of security enhancements allowing you to better control the use of
    your code. In addition, it''s critical to be aware of error conditions that formerly
    only generated Warnings, but now generate Errors, so that you take measures to
    prevent your applications from failing following an upgrade to PHP 8.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第三章*]，*利用错误处理增强功能*，探讨了 PHP 8 中的一个关键改进，即其先进的错误处理能力。在本章中，您将了解哪些通知已升级为警告，以及哪些警告现在已经升级为错误。本章将帮助您更好地了解安全增强的背景和意图，从而更好地控制代码的使用。此外，了解以前只生成警告但现在生成错误的错误条件是至关重要的，这样您就可以采取措施防止在升级到
    PHP 8 后应用程序失败。'
- en: '[*Chapter 4*](B16992_04_Final_JC_ePub.xhtml#_idTextAnchor085), *Making Direct
    C-Language Calls*, helps you to learn what the Foreign Function Interface (FFI)
    is all about, what it''s good for, and how to use it. The information in this
    chapter is important for developers interested in rapid custom prototyping using
    direct C language calls. This chapter shows you how to incorporate C language
    structures and functions directly into your code, opening the doors to an entire
    world of functionality hitherto unavailable to PHP.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 第4章《进行直接的C语言调用》帮助您了解外部函数接口（FFI）的全部内容，它的作用以及如何使用它。本章的信息对于对使用直接C语言调用进行快速自定义原型设计感兴趣的开发人员非常重要。本章向您展示如何直接将C语言结构和函数合并到您的代码中，打开了一个迄今为止对PHP不可用的整个功能世界的大门。
- en: '[*Chapter 5*](B16992_05_Final_JC_ePub.xhtml#_idTextAnchor104), *Discovering
    Potential OOP Backward-Compatibility Breaks*, introduces you to new PHP 8 features
    specific to OOP. The chapter features plenty of short code examples that clearly
    illustrate the new features and concepts. This chapter is critical in helping
    you quickly take advantage of the power of PHP 8 by adapting the code examples
    into your own practice. In addition, this chapter highlights situations where
    object-oriented code might break after a PHP 8 migration.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 第5章《发现潜在的面向对象编程向后兼容性破坏》向您介绍了针对面向对象编程的新PHP 8功能。本章包含大量清晰说明新功能和概念的简短代码示例。本章对于帮助您快速利用PHP
    8的强大功能，并将代码示例调整到您自己的实践中非常关键。此外，本章还强调了在PHP 8迁移后可能导致面向对象代码中断的情况。
- en: '[*Chapter 6*](B16992_06_Final_JC_ePub.xhtml#_idTextAnchor129), *Understanding
    PHP 8 Functional Differences*, covers potential backwards d-compatibility breaks
    at the PHP 8 command or functional level. This chapter presents important information
    that highlights potential pitfalls when migrating existing code to PHP 8\. The
    information presented in this chapter enables you to produce reliable PHP code.
    After working through the concepts in this chapter, you''ll be in a better position
    to write code that produces precise results and avoids inconsistencies.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 第6章《理解PHP 8的功能差异》涵盖了在PHP 8命令或功能级别可能出现的向后不兼容性破坏。本章提供了重要信息，突出了将现有代码迁移到PHP 8时可能出现的潜在陷阱。本章中提供的信息使您能够编写可靠的PHP代码。通过学习本章中的概念，您将更有能力编写能够产生精确结果并避免不一致性的代码。
- en: '[*Chapter 7*](B16992_07_Final_JC_ePub.xhtml#_idTextAnchor162), *Avoiding Traps
    When Using PHP 8 Extensions*, takes you through the major changes to extensions
    that have been made and how to avoid traps when updating an existing application
    to PHP 8\. Once you finish reviewing the sample code and topics presented, you''ll
    be able to prepare any existing PHP code for migration to PHP 8\. In addition
    to learning about the changes to the various extensions, you''ll also gain deep
    insight into their operation. This will allow you to make informed decisions when
    using extensions in PHP 8.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 第7章《在使用PHP 8扩展时避免陷阱》带您了解了对扩展所做的主要更改以及在将现有应用程序更新到PHP 8时如何避免陷阱。一旦您完成了对示例代码和主题的审阅，您将能够为将任何现有的PHP代码准备好迁移到PHP
    8。除了学习各种扩展的变化之外，您还将深入了解它们的运作方式。这将使您能够在PHP 8中使用扩展时做出明智的决策。
- en: '[*Chapter 8*](B16992_08_Final_JC_ePub.xhtml#_idTextAnchor195), *Learning about
    PHP 8''s Deprecated or Removed Functionality*, walks you through functionality
    that has been deprecated or removed in PHP 8\. After you have read the material
    in this chapter and followed the example application code, you will be able to
    detect and rewrite code that has been deprecated. You will also learn how to develop
    workarounds for functionality that has been removed as well as how to refactor
    code that uses removed functionality involving extensions. Another important skill
    you will learn in this chapter is how to improve application security by rewriting
    code depending on functions that have been entirely removed in PHP 8.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 第8章《了解PHP 8中已弃用或移除的功能》带您了解了在PHP 8中已经弃用或移除的功能。在阅读了本章的材料并跟随示例应用代码之后，您将能够检测和重写已经弃用的代码。您还将学习如何为已经移除的功能开发解决方案，以及如何重构使用已移除功能的涉及扩展的代码。本章中您还将学习如何通过重写依赖于在PHP
    8中已完全移除的功能的代码来提高应用程序的安全性。
- en: '[*Chapter 9*](B16992_09_Final_JC_ePub.xhtml#_idTextAnchor217), *Mastering PHP
    8 Best Practices*, introduces you to best practices now enforced in PHP 8\. It
    covers a number of significant method signature changes and how their new usage
    continues the general PHP trend of helping you to produce better code. You will
    also learn about changes in the use of private methods, interfaces, traits, and
    anonymous classes, and how namespaces are now parsed. Mastering the best practices
    covered in this chapter will not only move you toward writing better code but
    will help you avoid the potential code breaks that might arise if you fail to
    grasp these new practices.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 第9章《掌握PHP 8最佳实践》介绍了在PHP 8中现在强制执行的最佳实践。它涵盖了许多重要的方法签名更改以及它们的新用法如何延续了PHP的一般趋势，帮助您编写更好的代码。您还将了解到关于私有方法、接口、特征和匿名类的使用变化，以及现在如何解析命名空间。掌握本章涵盖的最佳实践不仅会使您更接近编写更好的代码，还将帮助您避免可能出现的代码中断，如果您没有掌握这些新实践的话。
- en: '[*Chapter 10*](B16992_10_Final_JC_ePub.xhtml#_idTextAnchor239), *Improving
    Performance*, introduces you to a number of new PHP 8 features that have a positive
    effect on performance, with a special focus on the new Just-In-Time compiler.
    This chapter also includes thorough coverage of weak references whose proper use
    results in applications that use far less memory. By carefully reviewing the material
    covered in this chapter and by studying the code examples, you will be able to
    write faster and more efficient code.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第10章*](B16992_10_Final_JC_ePub.xhtml#_idTextAnchor239)，*性能改进*，向您介绍了一些对性能有积极影响的新PHP
    8功能，特别关注新的即时编译器。本章还包括对弱引用的全面介绍，正确使用弱引用可以大大减少应用程序的内存使用。通过仔细审阅本章涵盖的内容并学习代码示例，您将能够编写更快速和更高效的代码。'
- en: '[*Chapter 11*](B16992_11_Final_JC_ePub.xhtml#_idTextAnchor263), *Migrating
    Existing PHP Apps to PHP 8*, introduces a set of classes that form the basis of
    a PHP 8 backward-compatible break scanner. Throughout the book, you are shown
    potential code breaks that might follow a PHP 8 update. In addition, you will
    learn about the recommended process for migrating an existing customer PHP application
    to PHP 8\. This chapter will leave you much better equipped to handle a PHP 8
    migration, giving you the ability to perform PHP 8 migrations with greater confidence
    and a minimum number of problems.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第11章*](B16992_11_Final_JC_ePub.xhtml#_idTextAnchor263)，*将现有PHP应用迁移到PHP 8*，介绍了一组类，这些类构成了PHP
    8向后兼容断点扫描器的基础。在整本书中，您将看到可能在PHP 8更新后出现的潜在代码断点。此外，您将了解将现有客户PHP应用程序迁移到PHP 8的推荐流程。本章将使您更好地准备处理PHP
    8迁移，让您能够更有信心地执行PHP 8迁移，并最大程度地减少问题。'
- en: '[*Chapter 12*](B16992_12_Final__JC_ePub.xhtml#_idTextAnchor289), *Creating
    PHP 8 Applications Using Asynchronous Programming*, explains the difference between
    the traditional synchronous and asynchronous programming models. In recent years,
    an exciting new technology has taken the PHP community by storm: asynchronous
    programming, also known as PHP async. In addition, popular PHP async extensions
    and frameworks, including the Swoole extension and ReactPHP are covered, with
    plenty of examples to get you started. By the time you are done working through
    this chapter, you will be in a position to improve the performance of your applications,
    making them anywhere from 5 times up to a staggering 40 times faster!'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第12章*](B16992_12_Final__JC_ePub.xhtml#_idTextAnchor289)，*使用异步编程创建PHP 8应用程序*，解释了传统同步和异步编程模型之间的区别。近年来，一种令人兴奋的新技术席卷了PHP社区：异步编程，也称为PHP
    async。此外，还涵盖了流行的PHP异步扩展和框架，包括Swoole扩展和ReactPHP，并提供了大量示例供您开始使用。通过完成本章的学习，您将能够提高应用程序的性能，使其速度提高5倍甚至惊人的40倍！'
- en: To get the most out of this book
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 要充分利用本书
- en: 'To get the most out of this book, you must have a basic understanding of PHP
    syntax, variables, control structures (for example, `if {} else {}`), looping
    structures (for example, `for () {}`), arrays, and functions. You must also have
    a basic idea of PHP OOP: classes, inheritance, and namespaces.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 要充分利用本书，您必须对PHP语法、变量、控制结构（例如，`if {} else {}`）、循环结构（例如，`for () {}`）、数组和函数有基本了解。您还必须对PHP面向对象编程有基本了解：类、继承和命名空间。
- en: 'If you have not received formal PHP training, or are unsure that you have the
    necessary knowledge, please review these two sections of the online PHP reference
    manual:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您没有接受过正式的PHP培训，或者不确定自己是否具备必要的知识，请查阅在线PHP参考手册的以下两个部分：
- en: 'PHP language reference:'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PHP语言参考：
- en: '[https://www.php.net/manual/en/langref.php](https://www.php.net/manual/en/langref.php)'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.php.net/manual/en/langref.php](https://www.php.net/manual/en/langref.php)'
- en: 'PHP OOP:'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PHP面向对象编程：
- en: '[https://www.php.net/manual/en/language.oop5.php](https://www.php.net/manual/en/language.oop5.php)'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.php.net/manual/en/language.oop5.php](https://www.php.net/manual/en/language.oop5.php)'
- en: 'Here is a summary of the software covered in this book:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是本书涵盖的软件摘要：
- en: '![](image/B16992_Preface_Table1.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](image/B16992_Preface_Table1.jpg)'
- en: Note
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: If you are using the digital version of this book, we advise you to type the
    code yourself or access the code from the book's GitHub repository (a link is
    available in the next section). Doing so will help you avoid any potential errors
    related to the copying and pasting of code.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是本书的数字版本，我们建议您自己输入代码，或者从书的GitHub存储库中访问代码（下一节中提供了链接）。这样做将帮助您避免与复制和粘贴代码相关的潜在错误。
- en: Download the example code files
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载示例代码文件
- en: You can download the example code files for this book from GitHub at [https://github.com/PacktPublishing/PHP-8-Programming-Tips-Tricks-and-Best-Practices](https://github.com/PacktPublishing/PHP-8-Programming-Tips-Tricks-and-Best-Practices).
    If there's an update to the code, it will be updated in the GitHub repository.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从GitHub上下载本书的示例代码文件：[https://github.com/PacktPublishing/PHP-8-Programming-Tips-Tricks-and-Best-Practices](https://github.com/PacktPublishing/PHP-8-Programming-Tips-Tricks-and-Best-Practices)。如果代码有更新，将在GitHub存储库中更新。
- en: We also have other code bundles from our rich catalog of books and videos available
    at [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/).
    Check them out!
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还有来自丰富图书和视频目录的其他代码包，可在[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)上找到。快去看看吧！
- en: Download the color images
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图像
- en: 'We also provide a PDF file that has color images of the screenshots and diagrams
    used in this book. You can download it here: [https://static.packt-cdn.com/downloads/9781801071871_ColorImages.pdf](https://static.packt-cdn.com/downloads/9781801071871_ColorImages.pdf).'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了一个PDF文件，其中包含本书中使用的屏幕截图和图表的彩色图像。您可以在这里下载：[https://static.packt-cdn.com/downloads/9781801071871_ColorImages.pdf](https://static.packt-cdn.com/downloads/9781801071871_ColorImages.pdf)。
- en: Conventions used
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了许多文本约定。
- en: '`Code in text`: Indicates code words in text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: "This chapter also taught you how the new `Attribute`
    class can be used as an eventual replacement for PHP DocBlocks."'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '`文本中的代码`：表示文本中的代码词，数据库表名，文件夹名，文件名，文件扩展名，路径名，虚拟URL，用户输入和Twitter句柄。这是一个例子：“本章还教会了您如何将新的`Attribute`类用作PHP
    DocBlocks的最终替代品。”'
- en: 'A block of code is set as follows:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE0]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望引起您对代码块的特定部分的注意时，相关的行或项目将以粗体显示：
- en: '[PRE1]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都将按以下方式编写：
- en: '[PRE2]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Tips or important notes
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 提示或重要说明
- en: Appear like this.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 显示如此。
