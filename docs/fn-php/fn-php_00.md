# 前言

函数式编程是每年会议上都会出现的范式。JavaScript 社区可能是最早接触这个主题的社区之一，但现在这个主题也在使用其他各种语言的开发人员中讨论，比如 Ruby，Python 和 Java。

PHP 具有大多数开发所需的功能，可以开始使用函数式方法。你没有理由被置于一边，这本书旨在教授函数式编程的基础知识。

如果你完全是函数式编程的新手，或者想要复习基础知识并了解一些历史和好处，我建议你从附录开始。虽然它不是本书的第一章，因为内容与 PHP 没有直接关系，但它将帮助你将各种主题放入上下文，并更好地了解本书涵盖的主题。

# 本书涵盖的内容

第一章，“PHP 中的函数作为一等公民”，讨论了函数式编程，正如其名称所暗示的那样，围绕函数展开。在本章中，你将学习它们在 PHP 中可以被声明和使用的各种方式。

第二章，“纯函数，引用透明度和不可变性”，涵盖了任何函数式代码库的基石。你将学习它们的含义以及如何应用它们来获益。

第三章，“PHP 中的函数式基础”，讨论了函数式编程，就像任何范式一样，依赖于一些核心概念。本章将以简单的方式呈现它们，然后进一步讨论。

第四章，“组合函数”，描述了函数如何经常被用作构建块，使用函数组合。在这一章中，你将学习如何在 PHP 中进行函数组合，以及在这样做时需要牢记的重要性。

第五章，“函子，应用函子和单子”，从更简单的概念开始，如函子和应用函子，然后逐渐建立我们的知识，最终介绍单子的概念，消除一些围绕这个术语的恐惧。

第六章，“现实生活中的单子”，帮助你了解单子抽象的一些实际用法，以及如何使用它来编写更好的代码。

第七章，“函数式技术和主题”，涉及类型系统、模式匹配、无点风格等来自函数式编程广阔领域的主题。

第八章，“测试”，教你函数式编程不仅有助于编写更易理解和维护的代码，而且还有助于简化测试。

第九章，“性能效率”，让你知道在 PHP 中使用函数式技术是有成本的。我们将首先讨论它，然后看看它如何在其他与性能相关的主题中发挥作用。

第十章，“PHP 框架和 FP”，介绍了一种可以应用于改进任何项目中代码的技术，因为目前 PHP 中没有专门的函数式编程框架。

第十一章，“设计一个函数式应用程序”，将为你提供一些建议，如果你想使用尽可能多的函数式代码来开发整个应用程序。你还将了解函数式响应式编程和 RxPHP 库。

`附录`，*我们谈论函数式编程时在谈论什么？*，是关于函数式编程的介绍和历史，以及它的好处和术语表。这实际上是你应该阅读的书的第一部分，但由于我们不是从 PHP 的角度来探讨这个主题，所以它被呈现为附录。

# 本书需要什么

你需要有一台安装了 PHP 的电脑。如果你知道如何使用命令行，那会更容易，但所有的例子也应该在浏览器中运行，也许需要做一些小的调整。

在学习函数式编程的同时，我还推荐使用一个 REPL（Read-Eval-Print-Loop）。在写这本书时，我个人使用了**Boris**。你可以在[`github.com/borisrepl/boris`](https://github.com/borisrepl/boris)找到它。另一个很好的选择是**PsySH**（[`psysh.org`](http://psysh.org)）。

虽然不是必需的，但 REPL 将允许你快速测试你的想法，并在不必在编辑器和命令行之间切换的情况下玩弄本书中将介绍的各种概念。

我也假设你已经安装了 Composer，并且知道如何使用它来安装新的包；如果没有，你可以在[`getcomposer.org`](https://getcomposer.org)找到它。本书将介绍多个库，并且推荐使用 Composer 来安装它们。

本书中的所有代码都在 PHP 7.0 上进行了测试，这是推荐的版本。然而，它也应该在任何更新的版本上运行。在进行一些小的调整后，大多数示例也应该在 PHP 5.6 上运行。我们将在整本书中使用 PHP 7.0 引入的新标量类型提示功能，但如果你移除它们，代码应该可以轻松兼容较低版本。

# 这本书是为谁准备的

这本书不需要对函数式编程有任何了解；但需要有先前的编程经验。另外，面向对象编程的基本概念不会被深入讨论。

深入了解 PHP 语言并不是必需的，因为不常见的语法将会被解释。这本书应该可以被理解为一个从未写过一行 PHP 代码的人，只要付出一些努力。

这本书可以被视为一本关于 PHP 函数式编程的入门书，这意味着我们将逐步建立知识。然而，由于主题非常广泛，而且页面有限，我们有时会快速移动。这就是为什么我鼓励你在学习这些概念时玩一下，并在每章结束时花一些时间确保你正确理解了它。

# 约定

在本书中，你会发现一些文本样式，用于区分不同类型的信息。以下是一些这些样式的例子和它们含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名都显示如下：“下面的代码行读取链接并将其分配给`BeautifulSoup`函数。”

代码块设置如下：

```php
<?php
function getPrices(array $products) {
  $prices = [];
  foreach($products as $p) {
    if($p->stock > 0) {
      $prices[] = $p->price;
    }
  }
  return $prices;
}
```

当我们希望引起你对代码块的特定部分的注意时，相关的行或项目会以粗体显示：

```php
<?php
function getPrices(array $products) {
  $prices = [];
  foreach($products as $p) {
    **if($p->stock > 0) {**
**      $prices[] = $p->price;**
**    }** }
  return $prices;
}
```

**任何命令行输入或输出都是这样写的：**

```php
**composer require rx/stream** 
```

**新术语**和**重要单词**以粗体显示。在屏幕上看到的单词，例如菜单或对话框中的单词，会在文本中以这种方式出现：“点击**下一步**按钮会将你移动到下一个屏幕。”

### **注意**

**警告或重要提示会以这样的方式出现。**

### **提示**

**提示和技巧会以这种形式出现。**
